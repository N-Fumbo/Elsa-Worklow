{"version":3,"names":["CheckList","this","getSelectedValues","selectList","isFlagsEnum","selectedValue","selectedValues","onCheckChanged","e","checkbox","target","checked","value","isFlags","newValue","parseInt","selectedValuesChanged","emit","uniq","filter","x","items","render","fieldName","h","class","map","item","index","inputId","optionIsString","text","isSelected","findIndex","id","type","name","onChange","htmlFor"],"sources":["./src/components/shared/check-list/check-list.tsx"],"sourcesContent":["import {Component, h, Prop, Event, EventEmitter} from '@stencil/core';\nimport {uniq} from 'lodash'\nimport {SelectList} from \"../../../models\";\n\n@Component({\n  tag: 'elsa-check-list',\n  shadow: false\n})\nexport class CheckList {\n  @Prop() selectList: SelectList = {items: [], isFlagsEnum: false};\n  @Prop({mutable: true}) selectedValues?: Array<string> = [];\n  @Prop({mutable: true}) selectedValue?: number;\n  @Prop() fieldName: string;\n  @Event() selectedValuesChanged: EventEmitter<Array<string> | number>;\n\n  public render() {\n    const selectList = this.selectList;\n    const fieldName = this.fieldName;\n\n    return (\n      <div class=\"tw-max-w-lg tw-space-y-4 tw-my-4\">\n        {selectList.items.map((item, index) => {\n          const inputId = `${fieldName}_check-list_${index}`;\n          const optionIsString = typeof (item as any) == 'string';\n          const value = optionIsString ? item : item.value;\n          const text = optionIsString ? item : item.text;\n          const isSelected = selectList.isFlagsEnum\n            ? (this.selectedValue & (parseInt(value as string))) == parseInt(value as string)\n            : this.selectedValues.findIndex(x => x == value) >= 0;\n\n          return (\n            <div class=\"tw-relative tw-flex tw-items-start\">\n              <div class=\"tw-flex tw-items-center tw-h-5\">\n                <input id={inputId} type=\"checkbox\" name={fieldName} checked={isSelected} value={value}\n                       onChange={e => this.onCheckChanged(e)}\n                       class=\"focus:tw-ring-blue-500 tw-h-4 tw-w-4 tw-text-blue-600 tw-border-gray-300 tw-rounded\"/>\n              </div>\n              <div class=\"tw-ml-3 tw-text-sm\">\n                <label htmlFor={inputId} class=\"tw-font-medium tw-text-gray-700\">{text}</label>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n\n  private getSelectedValues = (selectList: SelectList): number | Array<string> => {\n    return selectList.isFlagsEnum ? this.selectedValue : this.selectedValues || [];\n  };\n\n  private onCheckChanged = (e: Event) => {\n    const checkbox = (e.target as HTMLInputElement);\n    const checked = checkbox.checked;\n    const value = checkbox.value;\n    const isFlags = this.selectList.isFlagsEnum;\n\n    if (isFlags) {\n      let newValue = this.selectedValue;\n\n      if (checked)\n        newValue = newValue | parseInt(value);\n      else\n        newValue = newValue & ~parseInt(value);\n\n      this.selectedValue = newValue;\n      this.selectedValuesChanged.emit(newValue);\n    } else {\n      let newValue = this.selectedValues;\n\n      if (checked)\n        newValue = uniq([...newValue, value]);\n      else\n        newValue = newValue.filter(x => x !== value);\n\n      this.selectedValues = newValue;\n      this.selectedValuesChanged.emit(newValue);\n    }\n  }\n}\n"],"mappings":"oHAQaA,EAAS,M,sFAuCZC,KAAAC,kBAAqBC,GACpBA,EAAWC,YAAcH,KAAKI,cAAgBJ,KAAKK,gBAAkB,GAGtEL,KAAAM,eAAkBC,IACxB,MAAMC,EAAYD,EAAEE,OACpB,MAAMC,EAAUF,EAASE,QACzB,MAAMC,EAAQH,EAASG,MACvB,MAAMC,EAAUZ,KAAKE,WAAWC,YAEhC,GAAIS,EAAS,CACX,IAAIC,EAAWb,KAAKI,cAEpB,GAAIM,EACFG,EAAWA,EAAWC,SAASH,QAE/BE,EAAWA,GAAYC,SAASH,GAElCX,KAAKI,cAAgBS,EACrBb,KAAKe,sBAAsBC,KAAKH,E,KAC3B,CACL,IAAIA,EAAWb,KAAKK,eAEpB,GAAIK,EACFG,EAAWI,OAAK,IAAIJ,EAAUF,SAE9BE,EAAWA,EAASK,QAAOC,GAAKA,IAAMR,IAExCX,KAAKK,eAAiBQ,EACtBb,KAAKe,sBAAsBC,KAAKH,E,mBAnEH,CAACO,MAAO,GAAIjB,YAAa,O,oBACF,G,sDAKjDkB,SACL,MAAMnB,EAAaF,KAAKE,WACxB,MAAMoB,EAAYtB,KAAKsB,UAEvB,OACEC,EAAA,OAAKC,MAAM,oCACRtB,EAAWkB,MAAMK,KAAI,CAACC,EAAMC,KAC3B,MAAMC,EAAU,GAAGN,gBAAwBK,IAC3C,MAAME,SAAyBH,GAAgB,SAC/C,MAAMf,EAAQkB,EAAiBH,EAAOA,EAAKf,MAC3C,MAAMmB,EAAOD,EAAiBH,EAAOA,EAAKI,KAC1C,MAAMC,EAAa7B,EAAWC,aACzBH,KAAKI,cAAiBU,SAASH,KAAsBG,SAASH,GAC/DX,KAAKK,eAAe2B,WAAUb,GAAKA,GAAKR,KAAU,EAEtD,OACEY,EAAA,OAAKC,MAAM,sCACTD,EAAA,OAAKC,MAAM,kCACTD,EAAA,SAAOU,GAAIL,EAASM,KAAK,WAAWC,KAAMb,EAAWZ,QAASqB,EAAYpB,MAAOA,EAC1EyB,SAAU7B,GAAKP,KAAKM,eAAeC,GACnCiB,MAAM,yFAEfD,EAAA,OAAKC,MAAM,sBACTD,EAAA,SAAOc,QAAST,EAASJ,MAAM,mCAAmCM,IAEhE,I"}