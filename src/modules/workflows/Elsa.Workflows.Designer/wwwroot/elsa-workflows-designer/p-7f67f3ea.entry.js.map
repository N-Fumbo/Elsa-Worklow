{"version":3,"names":["OutcomePicker","this","onExpressionChanged","e","inputContext","inputChanged","detail","expression","syntax","onChange","inputElement","target","outcome","value","SyntaxNames","Object","render","inputDescriptor","fieldName","name","fieldId","displayName","description","input","getInputPropertyValue","_a","_c","_b","type","defaultSyntax","h","WorkflowDefinitionTunnel","Consumer","workflowDefinition","outcomes","label","hint","id","map","isSelected","selected"],"sources":["./src/components/inputs/outcome-picker.tsx"],"sourcesContent":["import {Component, Prop, h} from '@stencil/core';\nimport {ObjectExpression, LiteralExpression, SyntaxNames, Variable} from \"../../models\";\nimport {ActivityInputContext} from \"../../services/activity-input-driver\";\nimport {getInputPropertyValue, getPropertyValue} from \"../../utils\";\nimport {FormEntry} from \"../shared/forms/form-entry\";\nimport WorkflowDefinitionTunnel from \"../../modules/workflow-definitions/state\";\nimport {OutputDefinition} from \"../../modules/workflow-definitions/models/entities\";\nimport {ExpressionChangedArs} from \"../shared/input-control-switch/input-control-switch\";\n\n@Component({\n  tag: 'elsa-outcome-picker-input',\n  shadow: false\n})\nexport class OutcomePicker {\n  @Prop() public inputContext: ActivityInputContext;\n\n  public render() {\n    const inputContext = this.inputContext;\n    const inputDescriptor = inputContext.inputDescriptor;\n    const fieldName = inputDescriptor.name;\n    const fieldId = inputDescriptor.name;\n    const displayName = inputDescriptor.displayName;\n    const description = inputDescriptor.description;\n    const input = getInputPropertyValue(inputContext);\n    const value = (input?.expression as ObjectExpression)?.value;\n    const syntax = input?.expression?.type ?? inputDescriptor.defaultSyntax;\n\n    return (\n      <WorkflowDefinitionTunnel.Consumer>\n        {({workflowDefinition}) => {\n          let outcomes: string[] = workflowDefinition?.outcomes ?? [];\n          outcomes = [null, ...outcomes];\n          return <elsa-input-control-switch label={displayName} hint={description} syntax={syntax} expression={value} onExpressionChanged={this.onExpressionChanged}>\n            <select id={fieldId} name={fieldName} onChange={e => this.onChange(e)}>\n              {outcomes.map((outcome: string) => {\n                const displayName = outcome ?? '';\n                const isSelected = outcome == value;\n                return <option value={outcome} selected={isSelected}>{displayName}</option>;\n              })}\n            </select>\n          </elsa-input-control-switch>\n        }}\n      </WorkflowDefinitionTunnel.Consumer>\n    );\n  }\n\n  private onExpressionChanged = (e: CustomEvent<ExpressionChangedArs>) => {\n    this.inputContext.inputChanged(e.detail.expression, e.detail.syntax);\n  }\n\n  private onChange = (e: Event) => {\n    const inputElement = e.target as HTMLSelectElement;\n    const outcome = inputElement.value;\n    this.inputContext.inputChanged(outcome, SyntaxNames.Object);\n  }\n}\n"],"mappings":"wSAaaA,EAAa,M,yBAiChBC,KAAAC,oBAAuBC,IAC7BF,KAAKG,aAAaC,aAAaF,EAAEG,OAAOC,WAAYJ,EAAEG,OAAOE,OAAO,EAG9DP,KAAAQ,SAAYN,IAClB,MAAMO,EAAeP,EAAEQ,OACvB,MAAMC,EAAUF,EAAaG,MAC7BZ,KAAKG,aAAaC,aAAaO,EAASE,EAAYC,OAAO,E,4BArCtDC,S,UACL,MAAMZ,EAAeH,KAAKG,aAC1B,MAAMa,EAAkBb,EAAaa,gBACrC,MAAMC,EAAYD,EAAgBE,KAClC,MAAMC,EAAUH,EAAgBE,KAChC,MAAME,EAAcJ,EAAgBI,YACpC,MAAMC,EAAcL,EAAgBK,YACpC,MAAMC,EAAQC,EAAsBpB,GACpC,MAAMS,GAAQY,EAACF,IAAK,MAALA,SAAK,SAALA,EAAOhB,cAA+B,MAAAkB,SAAA,SAAAA,EAAEZ,MACvD,MAAML,GAASkB,GAAAC,EAAAJ,IAAK,MAALA,SAAK,SAALA,EAAOhB,cAAU,MAAAoB,SAAA,SAAAA,EAAEC,QAAI,MAAAF,SAAA,EAAAA,EAAIT,EAAgBY,cAE1D,OACEC,EAACC,EAAyBC,SAAQ,MAC/B,EAAEC,yB,MACD,IAAIC,GAAqBT,EAAAQ,IAAkB,MAAlBA,SAAkB,SAAlBA,EAAoBC,YAAQ,MAAAT,SAAA,EAAAA,EAAI,GACzDS,EAAW,CAAC,QAASA,GACrB,OAAOJ,EAAA,6BAA2BK,MAAOd,EAAae,KAAMd,EAAad,OAAQA,EAAQD,WAAYM,EAAOX,oBAAqBD,KAAKC,qBACpI4B,EAAA,UAAQO,GAAIjB,EAASD,KAAMD,EAAWT,SAAUN,GAAKF,KAAKQ,SAASN,IAChE+B,EAASI,KAAK1B,IACb,MAAMS,EAAcT,IAAO,MAAPA,SAAO,EAAPA,EAAW,GAC/B,MAAM2B,EAAa3B,GAAWC,EAC9B,OAAOiB,EAAA,UAAQjB,MAAOD,EAAS4B,SAAUD,GAAalB,EAAqB,KAGrD,G"}