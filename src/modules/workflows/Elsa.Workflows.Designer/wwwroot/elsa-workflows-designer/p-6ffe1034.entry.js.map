{"version":3,"names":["OutputPicker","this","onExpressionChanged","e","inputContext","inputChanged","detail","expression","syntax","onChange","inputElement","target","outputName","value","SyntaxNames","Literal","render","inputDescriptor","fieldName","name","fieldId","displayName","description","input","getInputPropertyValue","_a","_c","_b","type","defaultSyntax","h","WorkflowDefinitionTunnel","Consumer","workflowDefinition","outputs","label","hint","id","map","output","isSelected","selected"],"sources":["./src/components/inputs/output-picker.tsx"],"sourcesContent":["import {Component, Prop, h} from '@stencil/core';\nimport {LiteralExpression, SyntaxNames, Variable} from \"../../models\";\nimport {ActivityInputContext} from \"../../services/activity-input-driver\";\nimport {getInputPropertyValue, getPropertyValue} from \"../../utils\";\nimport {FormEntry} from \"../shared/forms/form-entry\";\nimport WorkflowDefinitionTunnel from \"../../modules/workflow-definitions/state\";\nimport {OutputDefinition} from \"../../modules/workflow-definitions/models/entities\";\nimport {ExpressionChangedArs} from \"../shared/input-control-switch/input-control-switch\";\n\n@Component({\n  tag: 'elsa-output-picker-input',\n  shadow: false\n})\nexport class OutputPicker {\n  @Prop() public inputContext: ActivityInputContext;\n\n  public render() {\n    const inputContext = this.inputContext;\n    const inputDescriptor = inputContext.inputDescriptor;\n    const fieldName = inputDescriptor.name;\n    const fieldId = inputDescriptor.name;\n    const displayName = inputDescriptor.displayName;\n    const description = inputDescriptor.description;\n    const input = getInputPropertyValue(inputContext);\n    const value = (input?.expression as LiteralExpression)?.value;\n    const syntax = input?.expression?.type ?? inputDescriptor.defaultSyntax;\n\n    return (\n      <WorkflowDefinitionTunnel.Consumer>\n        {({workflowDefinition}) => {\n          let outputs: OutputDefinition[] = workflowDefinition?.outputs ?? [];\n          outputs = [null, ...outputs];\n          return <elsa-input-control-switch label={displayName} hint={description} syntax={syntax} expression={value} onExpressionChanged={this.onExpressionChanged}>\n            <select id={fieldId} name={fieldName} onChange={e => this.onChange(e)}>\n              {outputs.map((output: OutputDefinition) => {\n                const outputName = output?.name;\n                const displayName = output?.displayName ?? '';\n                const isSelected = outputName == value;\n                return <option value={outputName} selected={isSelected}>{displayName}</option>;\n              })}\n            </select>\n          </elsa-input-control-switch>\n        }}\n      </WorkflowDefinitionTunnel.Consumer>\n    );\n  }\n\n  private onExpressionChanged = (e: CustomEvent<ExpressionChangedArs>) => {\n    this.inputContext.inputChanged(e.detail.expression, e.detail.syntax);\n  }\n\n  private onChange = (e: Event) => {\n    const inputElement = e.target as HTMLSelectElement;\n    const outputName = inputElement.value;\n    this.inputContext.inputChanged(outputName, SyntaxNames.Literal);\n  }\n}\n"],"mappings":"wSAaaA,EAAY,M,yBAkCfC,KAAAC,oBAAuBC,IAC7BF,KAAKG,aAAaC,aAAaF,EAAEG,OAAOC,WAAYJ,EAAEG,OAAOE,OAAO,EAG9DP,KAAAQ,SAAYN,IAClB,MAAMO,EAAeP,EAAEQ,OACvB,MAAMC,EAAaF,EAAaG,MAChCZ,KAAKG,aAAaC,aAAaO,EAAYE,EAAYC,QAAQ,E,4BAtC1DC,S,UACL,MAAMZ,EAAeH,KAAKG,aAC1B,MAAMa,EAAkBb,EAAaa,gBACrC,MAAMC,EAAYD,EAAgBE,KAClC,MAAMC,EAAUH,EAAgBE,KAChC,MAAME,EAAcJ,EAAgBI,YACpC,MAAMC,EAAcL,EAAgBK,YACpC,MAAMC,EAAQC,EAAsBpB,GACpC,MAAMS,GAAQY,EAACF,IAAK,MAALA,SAAK,SAALA,EAAOhB,cAAgC,MAAAkB,SAAA,SAAAA,EAAEZ,MACxD,MAAML,GAASkB,GAAAC,EAAAJ,IAAK,MAALA,SAAK,SAALA,EAAOhB,cAAU,MAAAoB,SAAA,SAAAA,EAAEC,QAAI,MAAAF,SAAA,EAAAA,EAAIT,EAAgBY,cAE1D,OACEC,EAACC,EAAyBC,SAAQ,MAC/B,EAAEC,yB,MACD,IAAIC,GAA8BT,EAAAQ,IAAkB,MAAlBA,SAAkB,SAAlBA,EAAoBC,WAAO,MAAAT,SAAA,EAAAA,EAAI,GACjES,EAAU,CAAC,QAASA,GACpB,OAAOJ,EAAA,6BAA2BK,MAAOd,EAAae,KAAMd,EAAad,OAAQA,EAAQD,WAAYM,EAAOX,oBAAqBD,KAAKC,qBACpI4B,EAAA,UAAQO,GAAIjB,EAASD,KAAMD,EAAWT,SAAUN,GAAKF,KAAKQ,SAASN,IAChE+B,EAAQI,KAAKC,I,MACZ,MAAM3B,EAAa2B,IAAM,MAANA,SAAM,SAANA,EAAQpB,KAC3B,MAAME,GAAcI,EAAAc,IAAM,MAANA,SAAM,SAANA,EAAQlB,eAAW,MAAAI,SAAA,EAAAA,EAAI,GAC3C,MAAMe,EAAa5B,GAAcC,EACjC,OAAOiB,EAAA,UAAQjB,MAAOD,EAAY6B,SAAUD,GAAanB,EAAqB,KAGxD,G"}