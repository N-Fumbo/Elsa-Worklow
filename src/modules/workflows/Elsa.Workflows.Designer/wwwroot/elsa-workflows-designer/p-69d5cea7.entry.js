import{r as t,c as e,h as s}from"./p-a7a3baa1.js";import{l as i}from"./p-e71312f9.js";import"./p-72dc819a.js";const n=class{constructor(s){t(this,s),this.valueChanged=e(this,"valueChanged",7),this.updateCurrentValues=e=>{const t=this.dropdownValues||[];let s=[];e&&e.forEach((e=>{const a="string"==typeof e?e:e.value,l=t.find((e=>e.value==a));l&&s.push(l)})),this.currentValues=s},this.fieldName=void 0,this.fieldId=void 0,this.placeHolder="Add tag",this.values=[],this.dropdownValues=[],this.currentValues=[]}valuesChangedHandler(e){this.updateCurrentValues(e)}componentWillLoad(){this.updateCurrentValues(this.values)}async onTagSelected(e){e.preventDefault();const t=e.target,s={text:t.options[t.selectedIndex].text.trim(),value:t.value};if(0==s.value.length)return;const a=i.uniq([...this.currentValues,s]);t.value="Add",await this.valueChanged.emit(a)}async onDeleteTagClick(e,t){e.preventDefault(),this.currentValues=this.currentValues.filter((e=>e.value!==t.value)),await this.valueChanged.emit(this.currentValues)}render(){let e=this.currentValues||[],t=this.dropdownValues.filter((t=>e.findIndex((e=>e.value===t.value))<0));Array.isArray(e)||(e=[]);const a=JSON.stringify(e.map((e=>e.value)));return s("div",{class:"tw-py-2 tw-px-3 tw-bg-white tw-shadow-sm tw-border tw-border-gray-300 tw-rounded-md"},e.map((e=>s("a",{href:"#",onClick:t=>this.onDeleteTagClick(t,e),class:"tw-inline-block tw-text-xs tw-bg-blue-400 tw-text-white tw-py-2 tw-px-3 tw-mr-1 tw-mb-1 tw-rounded"},s("input",{type:"hidden",value:e.value}),s("span",null,e.text),s("span",{class:"tw-text-white hover:tw-text-white tw-ml-1"},"Ã—")))),s("select",{id:this.fieldId,class:"tw-inline-block tw-text-xs tw-py-2 tw-px-3 tw-mr-1 tw-mb-1 tw-pr-8 tw-border-gray-300 focus:tw-outline-none focus:tw-ring-blue-500 focus:tw-border-blue-500 tw-rounded",onChange:e=>this.onTagSelected(e)},s("option",{value:"Add",disabled:!0,selected:!0},this.placeHolder),t.map((e=>s("option",{value:e.value},e.text)))),s("input",{type:"hidden",name:this.fieldName,value:a}))}static get watchers(){return{values:["valuesChangedHandler"]}}};export{n as elsa_input_tags_dropdown};