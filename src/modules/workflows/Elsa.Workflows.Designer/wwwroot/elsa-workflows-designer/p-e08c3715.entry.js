import{r as t,h as s}from"./p-a7a3baa1.js";import{l as i}from"./p-e71312f9.js";import{l as e,i as o,R as n}from"./p-dd7ad463.js";import{g as l}from"./p-b8db0e87.js";import"./p-72dc819a.js";import"./p-fcfa9e22.js";import"./p-144a434e.js";import"./p-1de51046.js";import"./p-4031f4ff.js";const a=class{constructor(s){t(this,s),this.selectList={items:[],isFlagsEnum:!1},this.getSelectedValues=t=>{var s;const i=this.inputContext.inputDescriptor,l=e(this.inputContext),n=i.defaultValue,a=this.getValueOrDefault(null===(s=null==l?void 0:l.expression)||void 0===s?void 0:s.value,n);let r=t.isFlagsEnum?parseInt(a):o(a)||[];return 0==r.length&&(r=o(n)||[]),r},this.onCheckChanged=t=>{const e=t.target,s=e.checked,l=e.value;let a="[]";if(this.selectList.isFlagsEnum){let t=this.selectedValue;s?t|=parseInt(l):t&=~parseInt(l),this.selectedValue=t,a=t.toString()}else{let t=this.selectedValues;t=s?i.uniq([...t,l]):t.filter((t=>t!==l)),this.selectedValues=t,a=JSON.stringify(t)}this.inputContext.inputChanged(a,n.Object)},this.onExpressionChanged=t=>{this.inputContext.inputChanged(t.detail.expression,t.detail.syntax)},this.inputContext=void 0,this.selectedValues=[],this.selectedValue=void 0}async componentWillLoad(){this.selectList=await l(this.inputContext.inputDescriptor);const t=this.getSelectedValues(this.selectList);Array.isArray(t)?this.selectedValues=t:"number"==typeof t?this.selectedValue=t:"string"==typeof t&&(this.selectedValues=JSON.parse(t))}render(){var t,i,l;const n=this.inputContext,a=n.inputDescriptor,o=a.name,r=a.name,u=a.displayName,p=a.description,d=e(n),c=null===(t=null==d?void 0:d.expression)||void 0===t?void 0:t.value,h=null!==(l=null===(i=null==d?void 0:d.expression)||void 0===i?void 0:i.type)&&void 0!==l?l:a.defaultSyntax,m=this.selectList;return s("elsa-input-control-switch",{label:u,hint:p,syntax:h,expression:c,onExpressionChanged:this.onExpressionChanged},s("div",{class:"tw-max-w-lg tw-space-y-4 tw-my-4"},m.items.map(((t,e)=>{const i=`${r}_${e}`,l="string"==typeof t,n=l?t:t.value,a=l?t:t.text,u=m.isFlagsEnum?(this.selectedValue&parseInt(n))==parseInt(n):this.selectedValues.findIndex((t=>t==n))>=0;return s("div",{class:"tw-relative tw-flex tw-items-start"},s("div",{class:"tw-flex tw-items-center tw-h-5"},s("input",{id:i,type:"checkbox",name:o,checked:u,value:n,onChange:t=>this.onCheckChanged(t),class:"focus:tw-ring-blue-500 tw-h-4 tw-w-4 tw-text-blue-600 tw-border-gray-300 tw-rounded"})),s("div",{class:"tw-ml-3 tw-text-sm"},s("label",{htmlFor:i,class:"tw-font-medium tw-text-gray-700"},a)))}))))}getValueOrDefault(t,e){var s;return null!==(s=null!=t?t:e)&&void 0!==s?s:""}};export{a as elsa_check_list_input};