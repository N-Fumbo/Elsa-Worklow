{"version":3,"names":["HttpStatusCodesEditor","this","onPropertyEditorChanged","e","statusCodes","detail","activity","inputContext","expectedStatusCodes","_a","statusCode","findIndex","x","toString","push","parseInt","i","length","splice","notifyInputChanged","render","inputDescriptor","fieldId","name","displayName","hint","description","getPropertyValue","statusCodeTags","map","h","FormEntry","label","values","onValueChanged","placeHolder"],"sources":["./src/modules/http-request/sequence/http-status-codes-editor.tsx"],"sourcesContent":["import {Component, h, Prop} from \"@stencil/core\";\nimport {ActivityInputContext} from \"../../../services/activity-input-driver\";\nimport {FormEntry} from \"../../../components/shared/forms/form-entry\";\nimport {getPropertyValue} from \"../../../utils\";\nimport {HttpStatusCodeCase, SendHttpRequest} from \"./models\";\n\n@Component({\n  tag: 'elsa-http-status-codes-editor',\n  shadow: false\n})\nexport class HttpStatusCodesEditor {\n  @Prop() inputContext: ActivityInputContext;\n\n  render() {\n    const inputContext = this.inputContext;\n    const inputDescriptor = inputContext.inputDescriptor;\n    const fieldId = inputDescriptor.name;\n    const displayName = inputDescriptor.displayName;\n    const hint = inputDescriptor.description;\n    const expectedStatusCodes: Array<HttpStatusCodeCase> = getPropertyValue(inputContext) ?? [];\n    const statusCodeTags = expectedStatusCodes.map(x => x.statusCode.toString());\n\n    return (\n      <FormEntry fieldId={fieldId} label={displayName} hint={hint}>\n        <elsa-input-tags fieldId={fieldId} values={statusCodeTags} onValueChanged={this.onPropertyEditorChanged} placeHolder=\"Add status code\"/>\n      </FormEntry>\n    );\n  }\n\n  private onPropertyEditorChanged = (e: CustomEvent<Array<string>>) => {\n    const statusCodes = e.detail;\n    const activity = this.inputContext.activity as SendHttpRequest;\n    const expectedStatusCodes = activity.expectedStatusCodes ?? [];\n\n    // Push new status codes.\n    for (const statusCode of statusCodes) {\n      if (expectedStatusCodes.findIndex(x => x.statusCode.toString() == statusCode) == -1)\n        expectedStatusCodes.push({statusCode: parseInt(statusCode)});\n    }\n\n    // Remove status codes that are no longer present.\n    for (let i = expectedStatusCodes.length - 1; i >= 0; i--) {\n      const statusCode = expectedStatusCodes[i].statusCode.toString();\n      if (statusCodes.findIndex(x => x == statusCode) == -1)\n        expectedStatusCodes.splice(i, 1);\n    }\n\n    activity.expectedStatusCodes = expectedStatusCodes;\n    this.inputContext.notifyInputChanged();\n  };\n}\n"],"mappings":"iSAUaA,EAAqB,M,yBAmBxBC,KAAAC,wBAA2BC,I,MACjC,MAAMC,EAAcD,EAAEE,OACtB,MAAMC,EAAWL,KAAKM,aAAaD,SACnC,MAAME,GAAsBC,EAAAH,EAASE,uBAAmB,MAAAC,SAAA,EAAAA,EAAI,GAG5D,IAAK,MAAMC,KAAcN,EAAa,CACpC,GAAII,EAAoBG,WAAUC,GAAKA,EAAEF,WAAWG,YAAcH,MAAgB,EAChFF,EAAoBM,KAAK,CAACJ,WAAYK,SAASL,I,CAInD,IAAK,IAAIM,EAAIR,EAAoBS,OAAS,EAAGD,GAAK,EAAGA,IAAK,CACxD,MAAMN,EAAaF,EAAoBQ,GAAGN,WAAWG,WACrD,GAAIT,EAAYO,WAAUC,GAAKA,GAAKF,MAAgB,EAClDF,EAAoBU,OAAOF,EAAG,E,CAGlCV,EAASE,oBAAsBA,EAC/BP,KAAKM,aAAaY,oBAAoB,E,4BAnCxCC,S,MACE,MAAMb,EAAeN,KAAKM,aAC1B,MAAMc,EAAkBd,EAAac,gBACrC,MAAMC,EAAUD,EAAgBE,KAChC,MAAMC,EAAcH,EAAgBG,YACpC,MAAMC,EAAOJ,EAAgBK,YAC7B,MAAMlB,GAAiDC,EAAAkB,EAAiBpB,MAAa,MAAAE,SAAA,EAAAA,EAAI,GACzF,MAAMmB,EAAiBpB,EAAoBqB,KAAIjB,GAAKA,EAAEF,WAAWG,aAEjE,OACEiB,EAACC,EAAS,CAACT,QAASA,EAASU,MAAOR,EAAaC,KAAMA,GACrDK,EAAA,mBAAiBR,QAASA,EAASW,OAAQL,EAAgBM,eAAgBjC,KAAKC,wBAAyBiC,YAAY,oB"}